
@{
    ViewBag.Title = "BuildDetectionScheme";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}
@section head{
    <style>
        .bigestdiv {
            margin-left:5%;
            margin-right:5%;
            margin-top:50px;
            margin-bottom:50px;
        }
        .title {            
            float: left;
        }
    </style>
}
<div class="bigestdiv">
    <div class="ui segments">
        <div class="ui segment">
            <p style="text-align: center; font-size: 30px">检测方案</p>
        </div>

        <div class="ui segment">
            <p class="title">检测产品：</p>
            <p>@ViewBag.productname</p>
        </div>
        <div class="ui segment">
            <p class="title">生产商：</p>
            <p>@ViewBag.company</p>
        </div>

        <div class="ui segment">
            <p class="">批次数量信息：</p>
        </div>

        <div class="ui segments">
            @foreach (var temp in ViewBag.list)
            {
                <div class="ui segment">
                    <p class="title">@temp.BatchName：</p>
                    <p>@temp.Count</p>
                </div>
            }



        </div>


        <div class="ui segment">
            <p>检查级别：</p>

        </div>
        <div class="ui segments">
            <div class="ui horizontal segments">
                <div class="ui segment">
                    <select id="s1">
                        <option value="0">特殊检测级别</option>
                        <option value="1">一般检测级别</option>
                    </select>
                </div>
                <div class="ui segment">
                    <select id="s2">
                       
                    </select>
                </div>
                <div class="ui segment">
                    <p id="s3">A</p>
                </div>
            </div>
        </div>



        <div class="ui segment">
            <p class="title">检测时间范围：</p>
            <p class="title">@ViewBag.model.MinTime 天</p>
            <p class="title">~</p>
            <p>@ViewBag.model.MaxTime 天</p>

        </div>

        <div class="ui segment form">

            <div class="field">
                <div class="3 fields">
                    <div class="field" style="">
                        <p style="margin: 0 auto">确定检测时间：</p>
                    </div>
                    <div class="field">
                        <input id="time" style="height: 25px" type="text"  placeholder="" value="">
                    </div>

                </div>
            </div>


        </div>

        <div class="ui segment">
            <p class="title">检测报价范围：</p>
            <p class="title">@ViewBag.model.MinQuote</p>
            <p class="title">~</p>
            <p>@ViewBag.model.MaxQuote</p>

        </div>


        <div class="ui segment form">

            <div class="field">
                <div class="3 fields">
                    <div class="field" style="">
                        <p style="margin: 0 auto">用户检测报价：</p>
                    </div>
                    <div class="field">
                        <input id="q1" style="height: 25px" type="text" name="shipping[first-name]" placeholder="" value="">
                    </div>

                </div>
            </div>


        </div>

        <div class="ui segment form">

            <div class="field">
                <div class="3 fields">
                    <div class="field" style="">
                        <p style="margin: 0 auto">检测机构报价：</p>
                    </div>
                    <div class="field">
                        <input id="q2" style="height: 25px" type="text" name="shipping[first-name]" placeholder="" value="">
                    </div>

                </div>
            </div>


        </div>


        <div class="ui segment" align="center">
            <button class="ui button green" id="btn" style="margin: 0 auto; width: 30%">发送</button>
        </div>
    </div>
</div>
<input id="checknum" style="display:none" value="@ViewBag.model.Trade.Id"/>
<input id="tradeid" style="display:none" value="@ViewBag.tradeid" />
@section scripts{
    <script>
        $("#btn").click(function() {

            var q1 = $("#q1").val();
            var q2 = $("#q2").val();
            var time = $("#time").val();
            var c = $("#checknum").val();
            $.ajax({
                url: '../DetectionScheme/SendDetectionScheme',
                type: 'post',
                data: { Tradeid: c, quser: q1, qother: q2, time: time },

                error: function() {
                    alert('error');
                },
                success: function(data) {
                    alert("发送成功");
                    top.location = '..';
                }
            });

        });

        $("#s1").change(function() {
            var ss1 = $(this).val();
            var s = "";
            if (ss1 == 0) {
                s = " <option value='1'>S-1</option>";
                s += "<option value='2'>S-2</option>";
                s += "<option value='3'>S-3</option>";
                s += "<option value='4'>S-4</option>";
            } else {
                s = " <option value='11'>I</option>";
                s += "<option value='12'>Ⅱ</option>";
                s += "<option value='13'>Ⅲ</option>";
            }
            $("#s2").html(s);
        });

        $("#s2").change(function() {
            var s2 = $(this).val();

            $.ajax({
                url: '../DetectionScheme/GetLevel',
                type: 'post',
                data: { tradeid:@ViewBag.tradeid,s2:s2},

                error: function () {
                    alert('error');
                },
                success: function (data) {
                    $("#s3").html(data);
                }
            });
        });
    </script>
}
